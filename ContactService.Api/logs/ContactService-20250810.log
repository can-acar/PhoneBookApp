[2025-08-10 04:02:03.077 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Connected to MongoDB database: PhoneBookDb {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 04:02:03.092 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Creating MongoDB indexes for optimal query performance... {"MachineName":"base","EnvironmentName":"Development","Environment":[2025-08-10 04:[2025-08-10 04:02:33.129 +03:00 ERR]  ContactService ContactService.Infrastructure.Data.MongoDbContext Failed to create MongoDB indexes {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.Tim[2025-08-10 04:02:33.129 +03:00 ERR]  ContactService ContactService.Infrastructure.Data.MongoDbContext Failed to create MongoDB indexes {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.TimeoutException: A timeout occurred after 30000ms selecting a server using CompositeServerSelector{ Selectors = WritableServerSelector, LatencyLimitingServerSelector{ AllowedLatencyRange = 00:00:00.0150000 }, OperationsCountServerSelector }. Client view of cluster state is { ClusterId : "1", Type : "Unknown", State : "Disconnected", Servers : [{ ServerId: "{ ClusterId : 1, EndPoint : "Unspecified/localhost:27017" }", EndPoint: "Unspecified/localhost:27017", ReasonChanged: "Heartbeat", State: "Disconnected", ServerVersion: , TopologyVersion: , Type: "Unknown", HeartbeatException: "MongoDB.Driver.MongoConnectionException: An exception occurred while opening a connection to the server.
 ---> System.Net.Sockets.SocketException (61): Connection refused
   at System.Threading.Tasks.ValueTask.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.Connect(Socket socket, EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.CreateStream(EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.ServerMonitor.InitializeConnection(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.ServerMonitor.Heartbeat(CancellationToken cancellationToken)", LastHeartbeatTimestamp: "2025-08-10T01:02:33.0795660Z", LastUpdateTimestamp: "2025-08-10T01:02:33.0795680Z" }] }.
   at MongoDB.Driver.Core.Clusters.Cluster.ThrowTimeoutException(IServerSelector selector, ClusterDescription description)
   at MongoDB.Driver.Core.Clusters.Cluster.WaitForDescriptionChangedAsync(IServerSelector selector, ClusterDescription description, Task descriptionChangedTask, TimeSpan timeout, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Clusters.Cluster.SelectServerAsync(IServerSelector selector, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Clusters.IClusterExtensions.SelectServerAndPinIfNeededAsync(IClusterInternal cluster, ICoreSessionHandle session, IServerSelector selector, IReadOnlyCollection`1 deprioritizedServers, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Bindings.WritableServerBinding.GetWriteChannelSourceAsync(IReadOnlyCollection`1 deprioritizedServers, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.CreateIndexesOperation.ExecuteAsync(IWriteBinding binding, CancellationToken cancellationToken)
   at MongoDB.Driver.OperationExecutor.ExecuteWriteOperationAsync[TResult](IWriteBinding binding, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.ExecuteWriteOperationAsync[TResult](IClientSessionHandle session, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.MongoIndexManager.CreateManyAsync(IClientSessionHandle session, IEnumerable`1 models, CreateManyIndexesOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.UsingImplicitSessionAsync[TResult](Func`2[2025-08-10 04:02:33.135 +03:00 WRN]  ContactService  Failed to initialize MongoDB indexes - service will continue but performance may be impacted {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}[2025-08-10 04:02:33.135 +03:00 WRN]  ContactService  Failed to initialize MongoDB indexes - service will continue but performance may be impacted {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.TimeoutException: A timeout occurred after 30000ms selecting a server using CompositeServerSelector{ Selectors = WritableServerSelector, LatencyLimitingServerSelector{ AllowedLatencyRange = 00:00:00.0150000 }, OperationsCountServerSelector }. Client view of cluster state is { ClusterId : "1", Type : "Unknown", State : "Disconnected", Servers : [{ ServerId: "{ ClusterId : 1, EndPoint : "Unspecified/localhost:27017" }", EndPoint: "Unspecified/localhost:27017", ReasonChanged: "Heartbeat", State: "Disconnected", ServerVersion: , TopologyVersion: , Type: "Unknown", HeartbeatException: "MongoDB.Driver.MongoConnectionException: An exception occurred while opening a connection to the server.
 ---> System.Net.Sockets.SocketException (61): Connection refused
   at System.Threading.Tasks.ValueTask.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.Connect(Socket socket, EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.CreateStream(EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.ServerMonitor.InitializeConnection(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.ServerMonitor.Heartbeat(CancellationToken cancellationToken)", LastHeartbeatTimestamp: "2025-08-10T01:02:33.0795660Z", LastUpdateTimestamp: "2025-08-10T01:02:33.0795680Z" }] }.
   at MongoDB.Driver.Core.Clusters.Cluster.ThrowTimeoutException(IServerSelector selector, ClusterDescription description)
   at MongoDB.Driver.Core.Clusters.Cluster.WaitForDescriptionChangedAsync(IServerSelector selector, ClusterDescription description, Task descriptionChangedTask, TimeSpan timeout, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Clusters.Cluster.SelectServerAsync(IServerSelector selector, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Clusters.IClusterExtensions.SelectServerAndPinIfNeededAsync(IClusterInternal cluster, ICoreSessionHandle session, IServerSelector selector, IReadOnlyCollection`1 deprioritizedServers, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Bindings.WritableServerBinding.GetWriteChannelSourceAsync(IReadOnlyCollection`1 deprioritizedServers, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.CreateIndexesOperation.ExecuteAsync(IWriteBinding binding, CancellationToken cancellationToken)
   at MongoDB.Driver.OperationExecutor.ExecuteWriteOperationAsync[TResult](IWriteBinding binding, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.ExecuteWriteOperationAsync[TResult](IClientSessionHandle session, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.MongoIndexManager.CreateManyAsync(IClientSessionHandle session, IEnumerable`1 models, CreateManyIndexesOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.UsingImplicitSessionAsync[TResult](Func`2 funcAsync, CancellationToken cancellationToken)
   at ContactService.Infrastructure.Data.MongoDbContext.Initial[2025-08-10 04:02:33.186 +03:00 INF]  ContactService  ContactService başarıyla başlatıldı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 04:02:33.195 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker started {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"[2[2025-08-10 04:02:33.714 +03:00 ERR]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka: [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Connect to ipv6#[::1]:9092 failed: Connection refused (af[2025-08-10 04:02:33.714 +03:00 ERR]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kaf[2025-08-10 04:02:33.714 +03:00 ERR]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer error: localhost:9092/bootstrap: Connect to ipv6#[::1]:9092 failed: Connection refused (after 0ms in state C[2025-08-10 04:02:33.714 +03:00 ERR]  ContactService ContactService.Infrastructure.Services[2025-08-10 04:02:33.714 +03:00 ERR]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer error: 1/1 brokers are down {"MachineName":"base","EnvironmentName":"Development","Environment":"Development[20[2025-08-10 04:02:33.715 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 04:0[2025-08-10 04:02:34.160 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name[2025-08-10 04:02:34.160 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name 'ContactId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on[2025-08-10 04:02:34.214 +03:00 ERR]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka: [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Connect to ipv4#127.0.0.1:9092 failed: Connection refused[2025-08-10 04:02:34.214 +03:00 ERR]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka: [2025-08-10 04:02:34.214 +03:00 ERR]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer error: localhost:9092/bootstrap: Connect to ipv4#127.0.0.1:9092 failed: Connection refused (after 0ms in sta[2025-08-10 04:02:34.214 +03:00 ERR]  ContactService ContactService.Infrastructure.Services.Kaf[2025-08-10 04:02:34.549 +03:00 ERR]  ContactService Microsoft.EntityFrameworkCore.Database.Connection An error occurred using the connection to database 'PhoneBookDb' on server 'tcp://localhost:5432'. {"EventId":{"Id":20004,"Nam[2025-08-10 04:02:34.549 +03:00 ERR]  ContactService Microsoft.EntityFrameworkCore.Database.Connection An error occurred using the connection to database [2025-08-10 04:02:34.550 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Initializing UI Database {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 04:02:34.555 +03:00 ERR]  ContactService Microsoft.EntityFrameworkCore.Query An exception occurred while iterating over the results of a query for context type 'ContactService.Infrastructure.Data.ContactDbContext'.
Sy[2025-08-10 04:02:34.555 +03:00 ERR]  ContactService Microsoft.EntityFrameworkCore.Query An exception occurred while iterating over the results of a query for context type 'ContactService.Infrastructure.Data.ContactDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5432
 ---> System.Net.Sockets.SocketException (61): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5432
 ---> System.Net.Sockets.SocketException (61): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Exe[2025-08-10 04:02:34.561 +03:00 ERR]  ContactService ContactService.ApplicationService.Services.OutboxService Error occurred while processing pending outbox events {"MachineName":"base","EnvironmentName":"Development","Environmen[2025-08-10 04:02:34.561 +03:00 ERR]  ContactService ContactService.ApplicationService.Services.OutboxService Error occurred while processing pending outbox events {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5432
 ---> System.Net.Sockets.SocketException (61): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ContactService.Infrastructure.Repositories.OutboxRepository.GetPendingEventsAsync(Int32 batchSize, CancellationToken cancellationToken) in /Users/r00t/Projects/PhoneBookApp/ContactService.Infrastructure/Repositories/OutboxRepository.cs:line 40
  [2025-08-10 04:02:34.566 +03:00 ERR]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Error processing pending outbox events {"MachineName":"base","EnvironmentName":"Development","Environment":"Devel[2025-08-10 04:02:34.566 +03:00 ERR]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Error processing pending outbox events {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5432
 ---> System.Net.Sockets.SocketException (61): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ContactService.Infrastructure.Repositories.OutboxRepository.GetPendingEventsAsync(Int32 batchSize, CancellationToken cancellationToken) in /Users/r00t/Projects/PhoneBookApp/ContactService.Infrastructure/Repositories/OutboxRepository.cs:line 40
   at ContactService.ApplicationService.Services.OutboxService.ProcessPendingEventsAsync(CancellationToken cancellationToken) in /Users/r00t/Projects/PhoneBookApp/ContactService.ApplicationService/Services/OutboxService.cs:line 50
   at ContactService.ApplicationService.Work[2025-08-10 04:02:34.580 +03:00 ERR]  ContactService Microsoft.EntityFrameworkCore.Database.Connection An error occurred using the connection to database 'PhoneBookDb' on server 'tcp://localhost:5432'. {"EventId":{"Id":20004,"Nam[2025-08-10 04:02:34.580 +03:00 ERR]  ContactService Microsoft.EntityFrameworkCore.Database.Connection An error occurred using the connection to database [2025-08-10 04:02:34.581 +03:00 ERR]  ContactService Microsoft.EntityFrameworkCore.Query An exception occurred while iterating over the results of a query for context type 'ContactService.Infrastructure.Data.ContactDbContext'.
Sy[2025-08-10 04:02:34.581 +03:00 ERR]  ContactService Microsoft.EntityFrameworkCore.Query An exception occurred while iterating over the results of a query for context type 'ContactService.Infrastructure.Data.ContactDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5432
 ---> System.Net.Sockets.SocketException (61): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5432
 ---> System.Net.Sockets.SocketException (61): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Exe[2025-08-10 04:02:34.585 +03:00 ERR]  ContactService ContactService.ApplicationService.Services.OutboxService Error occurred while processing failed outbox events {"MachineName":"base","EnvironmentName":"Development","Environment[2025-08-10 04:02:34.585 +03:00 ERR]  ContactService ContactService.ApplicationService.Services.OutboxService Error occurred while processing failed outbox events {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5432
 ---> System.Net.Sockets.SocketException (61): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ContactService.Infrastructure.Repositories.OutboxRepository.GetFailedEventsReadyForRetryAsync(Int32 batchSize, CancellationToken cancellationToken) in /Users/r00t/Projects/PhoneBookApp/ContactService.Infrastructure/Repositories/OutboxRepository.cs:line 50
 [2025-08-10 04:02:34.590 +03:00 ERR]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Error processing failed outbox events {"MachineName":"base","EnvironmentName":"Development","Environment":"Develo[2025-08-10 04:02:34.590 +03:00 ERR]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Error processing failed outbox events {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5432
 ---> System.Net.Sockets.SocketException (61): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ContactService.Infrastructure.Repositories.OutboxRepository.GetFailedEventsReadyForRetryAsync(Int32 batchSize, CancellationToken cancellationToken) in /Users/r00t/Projects/PhoneBookApp/ContactService.Infrastructure/Repositories/OutboxRepository.cs:line 50
   at ContactService.ApplicationService.Services.OutboxService.ProcessFailedEventsAsync(CancellationToken cancellationToken) in /Users/r00t/Projects/PhoneBookApp/ContactService.ApplicationService/Services/OutboxService.cs:line 79
   at ContactService.ApplicationService.Wor[2025-08-10 04:02:34.637 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Saving healthchecks configuration to database {"MachineName":"base","EnvironmentName":"Development","Environmen[2025-08-10 04:02:[2025-08-10 04:02:34.712 +03:00 FTL]  ContactService Microsoft.AspNetCore.Hosting.Diagnostics Application startup exception {"EventId":{"Id":6},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Sys[2025-08-10 04:02:34.712 +03:00 FTL]  ContactService Microsoft.AspNetCore.Hosting.Diagnostics Application startup exception {"EventId":{"Id":6},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
[2025-08-10 04:02:34.713 +03:00 ERR]  ContactService Microsoft.Extensions.Hosting.Internal.Host Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"MachineName":"base","EnvironmentName":"Development[2025-08-10 04:02:34.713 +03:00 ERR]  ContactService Microsoft.Extensions.Hosting.Internal.Host Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, [2025-08-10 04:02:34.717 +03:00 ERR]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka: [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Connect to ipv6#[::1]:9092 failed: Connection refused (af[2025-08-10 04:02:34.717 +03:00 ERR]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kaf[2025-08-10 04:02:34.717 +03:00 ERR]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer error: localhost:9092/bootstrap: Connect to ipv6#[::1]:9092 failed: Connection refused (after 0ms in state C[2025-08-10 04:02:34.717 +03:00 ERR]  ContactService ContactService.Infrastructure.Services[2025-08-10 04:02:34.720 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 04:02:34.721 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped serv[2025-08-10 04:02:34.721 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 182
[2025-08-10 15:56:02.562 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 15:56:02.562 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 15:56:12.980 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 15:56:12.980 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 15:57:00.529 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 15:57:00.529 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 15:58:44.124 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 15:58:44.124 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 15:58:55.627 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 15:58:55.627 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 15:59:31.111 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 15:59:31.111 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 15:59:42.677 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 15:59:42.677 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 16:04:26.162 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 16:04:26.162 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 16:04:36.363 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 16:04:36.363 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 62
[2025-08-10 16:06:29.378 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Connected to MongoDB database: PhoneBookDb {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:06:29.419 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Creating MongoDB indexes for optimal query performance... {"MachineName":"base","EnvironmentName":"Development","Environment":[2025-08-10 16:[2025-08-10 16:06:29.546 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext MongoDB indexes created successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:06:29.546 +03:00 INF]  ContactService  MongoDB indexes initialized successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:06:29.672 +03:00 INF]  ContactService  ContactService başarıyla başlatıldı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:06:29.698 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker started {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"[2[2025-08-10 16:06:29.974 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 16:0[2025-08-10 16:06:30.638 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name[2025-08-10 16:06:30.638 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name 'ContactId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on[2025-08-10 16:06:31.206 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Initializing UI Database {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:06:31.322 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Saving healthchecks configuration to database {"MachineName":"base","EnvironmentName":"Development","Environmen[2025-08-10 16:06:[2025-08-10 16:06:31.420 +03:00 FTL]  ContactService Microsoft.AspNetCore.Hosting.Diagnostics Application startup exception {"EventId":{"Id":6},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Sys[2025-08-10 16:06:31.420 +03:00 FTL]  ContactService Microsoft.AspNetCore.Hosting.Diagnostics Application startup exception {"EventId":{"Id":6},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
[2025-08-10 16:06:31.431 +03:00 ERR]  ContactService Microsoft.Extensions.Hosting.Internal.Host Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"MachineName":"base","EnvironmentName":"Development[2025-08-10 16:06:31.431 +03:00 ERR]  ContactService Microsoft.Extensions.Hosting.Internal.Host Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, [2025-08-10 16:06:31.517 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:06:31.568 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped serv[2025-08-10 16:06:31.568 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 182
[2025-08-10 16:11:20.871 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Connected to MongoDB database: PhoneBookDb {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:11:20.887 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Creating MongoDB indexes for optimal query performance... {"MachineName":"base","EnvironmentName":"Development","Environment":[2025-08-10 16:[2025-08-10 16:11:20.954 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext MongoDB indexes created successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:11:20.954 +03:00 INF]  ContactService  MongoDB indexes initialized successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:11:21.001 +03:00 INF]  ContactService  ContactService başarıyla başlatıldı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:11:21.011 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker started {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"[2[2025-08-10 16:11:21.198 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 16:1[2025-08-10 16:11:21.658 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name[2025-08-10 16:11:21.658 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name 'ContactId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on[2025-08-10 16:11:22.061 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Initializing UI Database {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:11:22.151 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Saving healthchecks configuration to database {"MachineName":"base","EnvironmentName":"Development","Environmen[2025-08-10 16:11:[2025-08-10 16:11:22.230 +03:00 FTL]  ContactService Microsoft.AspNetCore.Hosting.Diagnostics Application startup exception {"EventId":{"Id":6},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Sys[2025-08-10 16:11:22.230 +03:00 FTL]  ContactService Microsoft.AspNetCore.Hosting.Diagnostics Application startup exception {"EventId":{"Id":6},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
[2025-08-10 16:11:22.234 +03:00 ERR]  ContactService Microsoft.Extensions.Hosting.Internal.Host Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"MachineName":"base","EnvironmentName":"Development[2025-08-10 16:11:22.234 +03:00 ERR]  ContactService Microsoft.Extensions.Hosting.Internal.Host Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, [2025-08-10 16:11:22.241 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:11:22.242 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped serv[2025-08-10 16:11:22.242 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 182
[2025-08-10 16:15:45.095 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Connected to MongoDB database: PhoneBookDb {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:15:45.111 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Creating MongoDB indexes for optimal query performance... {"MachineName":"base","EnvironmentName":"Development","Environment":[2025-08-10 16:[2025-08-10 16:15:45.180 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext MongoDB indexes created successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:15:45.180 +03:00 INF]  ContactService  MongoDB indexes initialized successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:15:45.226 +03:00 INF]  ContactService  ContactService başarıyla başlatıldı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:15:45.235 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker started {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"[2[2025-08-10 16:15:45.411 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 16:1[2025-08-10 16:15:45.889 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name[2025-08-10 16:15:45.889 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name 'ContactId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on[2025-08-10 16:15:46.292 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Initializing UI Database {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:15:46.382 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Saving healthchecks configuration to database {"MachineName":"base","EnvironmentName":"Development","Environmen[2025-08-10 16:15:[2025-08-10 16:15:46.459 +03:00 FTL]  ContactService Microsoft.AspNetCore.Hosting.Diagnostics Application startup exception {"EventId":{"Id":6},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Sys[2025-08-10 16:15:46.459 +03:00 FTL]  ContactService Microsoft.AspNetCore.Hosting.Diagnostics Application startup exception {"EventId":{"Id":6},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
[2025-08-10 16:15:46.463 +03:00 ERR]  ContactService Microsoft.Extensions.Hosting.Internal.Host Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"MachineName":"base","EnvironmentName":"Development[2025-08-10 16:15:46.463 +03:00 ERR]  ContactService Microsoft.Extensions.Hosting.Internal.Host Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, [2025-08-10 16:15:46.469 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:15:46.470 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped serv[2025-08-10 16:15:46.470 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 182
[2025-08-10 16:21:50.159 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Connected to MongoDB database: PhoneBookDb {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:21:50.172 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Creating MongoDB indexes for optimal query performance... {"MachineName":"base","EnvironmentName":"Development","Environment":[2025-08-10 16:[2025-08-10 16:21:50.218 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext MongoDB indexes created successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:21:50.218 +03:00 INF]  ContactService  MongoDB indexes initialized successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:21:50.251 +03:00 INF]  ContactService  ContactService başarıyla başlatıldı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:21:50.255 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker started {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"[2[2025-08-10 16:21:50.344 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 16:2[2025-08-10 16:21:50.507 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name[2025-08-10 16:21:50.507 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name 'ContactId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on[2025-08-10 16:21:50.663 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Initializing UI Database {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:21:50.699 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Saving healthchecks configuration to database {"MachineName":"base","EnvironmentName":"Development","Environmen[2025-08-10 16:21:[2025-08-10 16:21:50.728 +03:00 FTL]  ContactService Microsoft.AspNetCore.Hosting.Diagnostics Application startup exception {"EventId":{"Id":6},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Sys[2025-08-10 16:21:50.728 +03:00 FTL]  ContactService Microsoft.AspNetCore.Hosting.Diagnostics Application startup exception {"EventId":{"Id":6},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
[2025-08-10 16:21:50.730 +03:00 ERR]  ContactService Microsoft.Extensions.Hosting.Internal.Host Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"MachineName":"base","EnvironmentName":"Development[2025-08-10 16:21:50.730 +03:00 ERR]  ContactService Microsoft.Extensions.Hosting.Internal.Host Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, [2025-08-10 16:21:50.737 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:21:50.737 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped serv[2025-08-10 16:21:50.737 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 182
[2025-08-10 16:24:28.281 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Connected to MongoDB database: PhoneBookDb {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:24:28.295 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Creating MongoDB indexes for optimal query performance... {"MachineName":"base","EnvironmentName":"Development","Environment":[2025-08-10 16:[2025-08-10 16:24:28.348 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext MongoDB indexes created successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:24:28.348 +03:00 INF]  ContactService  MongoDB indexes initialized successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:24:28.382 +03:00 INF]  ContactService  ContactService başarıyla başlatıldı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:24:28.387 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker started {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"[2[2025-08-10 16:24:28.474 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 16:2[2025-08-10 16:24:28.633 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name[2025-08-10 16:24:28.633 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name 'ContactId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on[2025-08-10 16:24:28.776 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Initializing UI Database {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:24:28.812 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Saving healthchecks configuration to database {"MachineName":"base","EnvironmentName":"Development","Environmen[2025-08-10 16:24:[2025-08-10 16:24:28.843 +03:00 FTL]  ContactService Microsoft.AspNetCore.Hosting.Diagnostics Application startup exception {"EventId":{"Id":6},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
Sys[2025-08-10 16:24:28.843 +03:00 FTL]  ContactService Microsoft.AspNetCore.Hosting.Diagnostics Application startup exception {"EventId":{"Id":6},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
[2025-08-10 16:24:28.845 +03:00 ERR]  ContactService Microsoft.Extensions.Hosting.Internal.Host Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"MachineName":"base","EnvironmentName":"Development[2025-08-10 16:24:28.845 +03:00 ERR]  ContactService Microsoft.Extensions.Hosting.Internal.Host Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, [2025-08-10 16:24:28.851 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:24:28.851 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped serv[2025-08-10 16:24:28.851 +03:00 FTL]  ContactService  ContactService başlatılamadı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
System.InvalidOperationException: Cannot resolve scoped service 'ContactService.Domain.Interfaces.IAuditLogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Program.cs:line 182
[2025-08-10 16:31:16.932 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Connected to MongoDB database: PhoneBookDb {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:31:16.944 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Creating MongoDB indexes for optimal query performance... {"MachineName":"base","EnvironmentName":"Development","Environment":[2025-08-10 16:[2025-08-10 16:31:16.989 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext MongoDB indexes created successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:31:16.989 +03:00 INF]  ContactService  MongoDB indexes initialized successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:31:17.021 +03:00 INF]  ContactService  ContactService başarıyla başlatıldı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:31:17.026 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker started {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"[2[2025-08-10 16:31:17.115 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 16:3[2025-08-10 16:31:17.278 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name[2025-08-10 16:31:17.278 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name 'ContactId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on[2025-08-10 16:31:17.422 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Initializing UI Database {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:31:17.457 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Saving healthchecks configuration to database {"MachineName":"base","EnvironmentName":"Development","Environmen[2025-08-10 16:31:[2025-08-10 16:31:17.538 +03:00 WRN] ba46bbea-967e-4470-b498-d8456741876d UnknownService Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"Fail[2025-08-10 16:31:17.538 +03:00 WRN] ba46bbea-967e-4470-b498-d8456741876d UnknownService Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware Failed to determine the https port for redirect. {"EventId":{"Id[2025-08-10 16:31:17.540 +03:00 INF] ba46bbea-967e-4470-b498-d8456741876d UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"RequestPath":"/health","HttpM[2025-08-10 16:31:17.540 +03:00 INF] ba46bbea-967e-4470-b498-d8456741876d UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initia[2025-08-10 16:31:17.563 +03:00 INF] ba46bbea-967e-4470-b498-d8456741876d UnknownService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"RequestPath":"/health","HttpMethod":"GET","RequestId":"0H[2025-08-10 16:31:17.563 +03:00 INF] ba46bbea-967e-4470-b498-d8456741876d UnknownService ContactService.Infrastructure.Services.KafkaPr[2025-08-10 16:31:17.641 +03:00 INF] ba46bbea-967e-4470-b498-d8456741876d UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"RequestPath":"/health","HttpMethod":"GET","Reque[2025-08-10 16:31:17.641 +03:00 INF] ba46bbea-967e-4470-b498-d8456741876d UnknownService ContactService.Infrastructure.Services.KafkaProducer Ka[2025-08-10 16:31:17.745 +03:00 WRN] ba46bbea-967e-4470-b498-d8456741876d UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check kafka with status "Degraded" completed after 203.8689ms[2025-08-10 16:31:17.745 +03:00 WRN] ba46bbea-967e-4470-b498-d8456741876d UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check kafka with status "Degraded" completed after 203.8689ms with message 'Kafka is available but missing topics: contact-events, report-events, notification-events' {"EventId"[2025-08-10 16:31:17.747 +03:00 ERR] ba46bbea-967e-4470-b498-d8456741876d ContactService Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware An unhandled exception has occurred while executing the request. {"EventId":{"Id[2025-08-10 16:31:17.747 +03:00 ERR] ba46bbea-967e-4470-b498-d8456741876d ContactService Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware An unhandled exception has occurred while executing the request. {"EventId":{"Id":1,"Name":"UnhandledException"},"RequestId":"0HNEO28NONPU9:00000001","RequestPath":"/health","ConnectionId":"0HNEO28NONPU9","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
StackExchange.Redis.RedisConnectionException: It was not possible to connect to the redis server(s). Error connecting right now. To allow this multiplexer to continue retrying until it's able to connect, use abortConnect=false in your connection string or AbortOnConnectFail=false; in your code.
   at StackExchange.Redis.ConnectionMultiplexer.ConnectImpl(ConfigurationOptions configuration, TextWriter writer, Nullable`1 serverType, EndPointCollection endpoints) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 689
   at StackExchange.Redis.ConnectionMultiplexer.Connect(ConfigurationOptions configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 661
   at StackExchange.Redis.ConnectionMultiplexer.Connect(String configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 639
   at ContactService.Container.ServiceCollectionExtensions.<>c__DisplayClass0_0.<AddContactServiceDependencies>b__3(IServiceProvider provider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Container/ServiceCollectionExtensions.cs:line 59
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance[T](IServiceProvider provider)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at ContactService.Api.Middleware.AuditLoggingMiddleware.InvokeAsync(HttpContext context, IAuditLogService auditLogService, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Middleware/AuditLoggingMiddleware.cs:line 48
   at Shared.CrossCutting.Middleware.CorrelationIdMiddleware.InvokeAsync(HttpContext context, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/Shared[2025-08-10 16:31:17.754 +03:00 ERR] ba46bbea-967e-4470-b498-d8456741876d ContactService ContactService.Api.Middleware.GlobalExceptionHandler An unhandled exception occurred {"RequestId":"0HNEO28NONPU9:00000001","RequestPath":"/h[2025-08-10 16:31:17.754 +03:00 ERR] ba46bbea-967e-4470-b498-d8456741876d ContactService ContactService.Api.Middleware.GlobalExceptionHandler An unhandled exception occurred {"RequestId":"0HNEO28NONPU9:00000001","RequestPath":"/health","ConnectionId":"0HNEO28NONPU9","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
StackExchange.Redis.RedisConnectionException: It was not possible to connect to the redis server(s). Error connecting right now. To allow this multiplexer to continue retrying until it's able to connect, use abortConnect=false in your connection string or AbortOnConnectFail=false; in your code.
   at StackExchange.Redis.ConnectionMultiplexer.ConnectImpl(ConfigurationOptions configuration, TextWriter writer, Nullable`1 serverType, EndPointCollection endpoints) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 689
   at StackExchange.Redis.ConnectionMultiplexer.Connect(ConfigurationOptions configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 661
   at StackExchange.Redis.ConnectionMultiplexer.Connect(String configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 639
   at ContactService.Container.ServiceCollectionExtensions.<>c__DisplayClass0_0.<AddContactServiceDependencies>b__3(IServiceProvider provider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Container/ServiceCollectionExtensions.cs:line 59
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance[T](IServiceProvider provider)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at ContactService.Api.Middleware.AuditLoggingMiddleware.InvokeAsync(HttpContext context, IAuditLogService auditLogService, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Middleware/AuditLoggingMiddleware.cs:line 48
   at Shared.CrossCutting.Middleware.CorrelationIdMiddleware.InvokeAsync(HttpContext context, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/Shared[2025-08-10 16:31:17.774 +03:00 ERR] ba46bbea-967e-4470-b498-d8456741876d ContactService Serilog.AspNetCore.RequestLoggingMiddleware HTTP GET /health responded 500 in 235.1608 ms {"RequestHost":"localhost:5188","RequestScheme":"h[2025-08-10 16:31:17.774 +03:00 ERR] ba46bbea-967e-4470-b498-d8456741876d ContactService Serilog.AspNetCore.RequestLoggingMiddleware HTTP GET /health responded 500 in 235.1[2025-08-10 16:31:47.487 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:31:47.586 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:31:47.590 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 16:3[2025-08-10 16:31:47.840 +03:00 INF] dff119a7-857b-4c26-9c87-2207a0b7dfc0 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"RequestPath":"/health","HttpM[2025-08-10 16:31:47.840 +03:00 INF] dff119a7-857b-4c26-9c87-2207a0b7dfc0 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initia[2025-08-10 16:31:47.846 +03:00 INF] dff119a7-857b-4c26-9c87-2207a0b7dfc0 UnknownService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"RequestPath":"/health","HttpMethod":"GET","RequestId":"0H[2025-08-10 16:31:47.846 +03:00 INF] dff119a7-857b-4c26-9c87-2207a0b7dfc0 UnknownService ContactService.Infrastructure.Services.KafkaPr[2025-08-10 16:31:47.941 +03:00 INF] dff119a7-857b-4c26-9c87-2207a0b7dfc0 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"RequestPath":"/health","HttpMethod":"GET","Reque[2025-08-10 16:31:47.941 +03:00 INF] dff119a7-857b-4c26-9c87-2207a0b7dfc0 UnknownService ContactService.Infrastructure.Services.KafkaProducer Ka[2025-08-10 16:31:48.042 +03:00 WRN] dff119a7-857b-4c26-9c87-2207a0b7dfc0 UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check kafka with status "Degraded" completed after 202.5154ms[2025-08-10 16:31:48.042 +03:00 WRN] dff119a7-857b-4c26-9c87-2207a0b7dfc0 UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check kafka with status "Degraded" completed after 202.5154ms with message 'Kafka is available but missing topics: contact-events, report-events, notification-events' {"EventId"[2025-08-10 16:31:48.043 +03:00 ERR] dff119a7-857b-4c26-9c87-2207a0b7dfc0 ContactService Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware An unhandled exception has occurred while executing the request. {"EventId":{"Id[2025-08-10 16:31:48.043 +03:00 ERR] dff119a7-857b-4c26-9c87-2207a0b7dfc0 ContactService Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware An unhandled exception has occurred while executing the request. {"EventId":{"Id":1,"Name":"UnhandledException"},"RequestId":"0HNEO28NONPU9:00000002","RequestPath":"/health","ConnectionId":"0HNEO28NONPU9","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
StackExchange.Redis.RedisConnectionException: It was not possible to connect to the redis server(s). Error connecting right now. To allow this multiplexer to continue retrying until it's able to connect, use abortConnect=false in your connection string or AbortOnConnectFail=false; in your code.
   at StackExchange.Redis.ConnectionMultiplexer.ConnectImpl(ConfigurationOptions configuration, TextWriter writer, Nullable`1 serverType, EndPointCollection endpoints) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 689
   at StackExchange.Redis.ConnectionMultiplexer.Connect(ConfigurationOptions configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 661
   at StackExchange.Redis.ConnectionMultiplexer.Connect(String configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 639
   at ContactService.Container.ServiceCollectionExtensions.<>c__DisplayClass0_0.<AddContactServiceDependencies>b__3(IServiceProvider provider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Container/ServiceCollectionExtensions.cs:line 59
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance[T](IServiceProvider provider)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at ContactService.Api.Middleware.AuditLoggingMiddleware.InvokeAsync(HttpContext context, IAuditLogService auditLogService, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Middleware/AuditLoggingMiddleware.cs:line 48
   at Shared.CrossCutting.Middleware.CorrelationIdMiddleware.InvokeAsync(HttpContext context, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/Shared[2025-08-10 16:31:48.044 +03:00 ERR] dff119a7-857b-4c26-9c87-2207a0b7dfc0 ContactService ContactService.Api.Middleware.GlobalExceptionHandler An unhandled exception occurred {"RequestId":"0HNEO28NONPU9:00000002","RequestPath":"/h[2025-08-10 16:31:48.044 +03:00 ERR] dff119a7-857b-4c26-9c87-2207a0b7dfc0 ContactService ContactService.Api.Middleware.GlobalExceptionHandler An unhandled exception occurred {"RequestId":"0HNEO28NONPU9:00000002","RequestPath":"/health","ConnectionId":"0HNEO28NONPU9","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
StackExchange.Redis.RedisConnectionException: It was not possible to connect to the redis server(s). Error connecting right now. To allow this multiplexer to continue retrying until it's able to connect, use abortConnect=false in your connection string or AbortOnConnectFail=false; in your code.
   at StackExchange.Redis.ConnectionMultiplexer.ConnectImpl(ConfigurationOptions configuration, TextWriter writer, Nullable`1 serverType, EndPointCollection endpoints) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 689
   at StackExchange.Redis.ConnectionMultiplexer.Connect(ConfigurationOptions configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 661
   at StackExchange.Redis.ConnectionMultiplexer.Connect(String configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 639
   at ContactService.Container.ServiceCollectionExtensions.<>c__DisplayClass0_0.<AddContactServiceDependencies>b__3(IServiceProvider provider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Container/ServiceCollectionExtensions.cs:line 59
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance[T](IServiceProvider provider)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at ContactService.Api.Middleware.AuditLoggingMiddleware.InvokeAsync(HttpContext context, IAuditLogService auditLogService, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Middleware/AuditLoggingMiddleware.cs:line 48
   at Shared.CrossCutting.Middleware.CorrelationIdMiddleware.InvokeAsync(HttpContext context, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/Shared[2025-08-10 16:31:48.045 +03:00 ERR] dff119a7-857b-4c26-9c87-2207a0b7dfc0 ContactService Serilog.AspNetCore.RequestLoggingMiddleware HTTP GET /health responded 500 in 206.5203 ms {"RequestHost":"localhost:5188","RequestScheme":"h[2025-08-10 16:31:48.045 +03:00 ERR] dff119a7-857b-4c26-9c87-2207a0b7dfc0 ContactService Serilog.AspNetCore.RequestLoggingMiddleware HTTP GET /health responded 500 in 206.5[2025-08-10 16:31:48.048 +03:00 INF]  ContactService HealthChecks.UI.Core.Notifications.WebHookFailureNotifier Notification is sent on same window time. {"Scope":["HealthReportCollector is collecting health checks results."],"Mac[2025-08-10 16:31:48.048 +03:00 INF]  ContactService HealthChecks.UI.Core.Noti[2025-08-10 16:32:17.604 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:32:17.651 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:32:17.652 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 16:3[2025-08-10 16:32:18.053 +03:00 INF] b07d8eba-ac99-48e9-a37a-474c80d126f2 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"RequestPath":"/health","HttpM[2025-08-10 16:32:18.053 +03:00 INF] b07d8eba-ac99-48e9-a37a-474c80d126f2 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initia[2025-08-10 16:32:18.057 +03:00 INF] b07d8eba-ac99-48e9-a37a-474c80d126f2 UnknownService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"RequestPath":"/health","HttpMethod":"GET","RequestId":"0H[2025-08-10 16:32:18.057 +03:00 INF] b07d8eba-ac99-48e9-a37a-474c80d126f2 UnknownService ContactService.Infrastructure.Services.KafkaPr[2025-08-10 16:32:18.151 +03:00 INF] b07d8eba-ac99-48e9-a37a-474c80d126f2 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"RequestPath":"/health","HttpMethod":"GET","Reque[2025-08-10 16:32:18.151 +03:00 INF] b07d8eba-ac99-48e9-a37a-474c80d126f2 UnknownService ContactService.Infrastructure.Services.KafkaProducer Ka[2025-08-10 16:32:18.252 +03:00 WRN] b07d8eba-ac99-48e9-a37a-474c80d126f2 UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check kafka with status "Degraded" completed after 203.2443ms[2025-08-10 16:32:18.252 +03:00 WRN] b07d8eba-ac99-48e9-a37a-474c80d126f2 UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check kafka with status "Degraded" completed after 203.2443ms with message 'Kafka is available but missing topics: contact-events, report-events, notification-events' {"EventId"[2025-08-10 16:32:18.253 +03:00 ERR] b07d8eba-ac99-48e9-a37a-474c80d126f2 ContactService Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware An unhandled exception has occurred while executing the request. {"EventId":{"Id[2025-08-10 16:32:18.253 +03:00 ERR] b07d8eba-ac99-48e9-a37a-474c80d126f2 ContactService Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware An unhandled exception has occurred while executing the request. {"EventId":{"Id":1,"Name":"UnhandledException"},"RequestId":"0HNEO28NONPU9:00000003","RequestPath":"/health","ConnectionId":"0HNEO28NONPU9","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
StackExchange.Redis.RedisConnectionException: It was not possible to connect to the redis server(s). Error connecting right now. To allow this multiplexer to continue retrying until it's able to connect, use abortConnect=false in your connection string or AbortOnConnectFail=false; in your code.
   at StackExchange.Redis.ConnectionMultiplexer.ConnectImpl(ConfigurationOptions configuration, TextWriter writer, Nullable`1 serverType, EndPointCollection endpoints) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 689
   at StackExchange.Redis.ConnectionMultiplexer.Connect(ConfigurationOptions configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 661
   at StackExchange.Redis.ConnectionMultiplexer.Connect(String configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 639
   at ContactService.Container.ServiceCollectionExtensions.<>c__DisplayClass0_0.<AddContactServiceDependencies>b__3(IServiceProvider provider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Container/ServiceCollectionExtensions.cs:line 59
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance[T](IServiceProvider provider)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at ContactService.Api.Middleware.AuditLoggingMiddleware.InvokeAsync(HttpContext context, IAuditLogService auditLogService, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Middleware/AuditLoggingMiddleware.cs:line 48
   at Shared.CrossCutting.Middleware.CorrelationIdMiddleware.InvokeAsync(HttpContext context, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/Shared[2025-08-10 16:32:18.256 +03:00 ERR] b07d8eba-ac99-48e9-a37a-474c80d126f2 ContactService ContactService.Api.Middleware.GlobalExceptionHandler An unhandled exception occurred {"RequestId":"0HNEO28NONPU9:00000003","RequestPath":"/h[2025-08-10 16:32:18.256 +03:00 ERR] b07d8eba-ac99-48e9-a37a-474c80d126f2 ContactService ContactService.Api.Middleware.GlobalExceptionHandler An unhandled exception occurred {"RequestId":"0HNEO28NONPU9:00000003","RequestPath":"/health","ConnectionId":"0HNEO28NONPU9","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
StackExchange.Redis.RedisConnectionException: It was not possible to connect to the redis server(s). Error connecting right now. To allow this multiplexer to continue retrying until it's able to connect, use abortConnect=false in your connection string or AbortOnConnectFail=false; in your code.
   at StackExchange.Redis.ConnectionMultiplexer.ConnectImpl(ConfigurationOptions configuration, TextWriter writer, Nullable`1 serverType, EndPointCollection endpoints) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 689
   at StackExchange.Redis.ConnectionMultiplexer.Connect(ConfigurationOptions configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 661
   at StackExchange.Redis.ConnectionMultiplexer.Connect(String configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 639
   at ContactService.Container.ServiceCollectionExtensions.<>c__DisplayClass0_0.<AddContactServiceDependencies>b__3(IServiceProvider provider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Container/ServiceCollectionExtensions.cs:line 59
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance[T](IServiceProvider provider)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at ContactService.Api.Middleware.AuditLoggingMiddleware.InvokeAsync(HttpContext context, IAuditLogService auditLogService, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Middleware/AuditLoggingMiddleware.cs:line 48
   at Shared.CrossCutting.Middleware.CorrelationIdMiddleware.InvokeAsync(HttpContext context, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/Shared[2025-08-10 16:32:18.259 +03:00 ERR] b07d8eba-ac99-48e9-a37a-474c80d126f2 ContactService Serilog.AspNetCore.RequestLoggingMiddleware HTTP GET /health responded 500 in 211.0717 ms {"RequestHost":"localhost:5188","RequestScheme":"h[2025-08-10 16:32:18.259 +03:00 ERR] b07d8eba-ac99-48e9-a37a-474c80d126f2 ContactService Serilog.AspNetCore.RequestLoggingMiddleware HTTP GET /health responded 500 in 211.0[2025-08-10 16:32:45.715 +03:00 ERR] 01609794-b05b-4de4-bc0e-ca7cea81a2da UnknownService ContactService.Infrastructure.Repositories.MongoAuditLogRepository Failed to create audit log for action HTTP_REQUEST on entity HttpRequest:[2025-08-10 16:32:45.715 +03:00 ERR] 01609794-b05b-4de4-bc0e-ca7cea81a2da UnknownService ContactService.Infrastructure.Repositories.MongoAuditLogRepository Failed to create audit log for action HTTP_REQUEST on entity HttpRequest:GET:/ {"RequestPath":"/","HttpMethod":"GET","RequestId":"0HNEO28NONPUA:00000001","ConnectionId":"0HNEO28NONPUA","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
MongoDB.Bson.BsonSerializationException: An error occurred while serializing the NewValues property of class ContactService.Domain.Entities.AuditLog: Type Newtonsoft.Json.Linq.JObject is not configured as a type that is allowed to be serialized for this instance of ObjectSerializer.
 ---> MongoDB.Bson.BsonSerializationException: Type Newtonsoft.Json.Linq.JObject is not configured as a type that is allowed to be serialized for this instance of ObjectSerializer.
   at MongoDB.Bson.Serialization.Serializers.ObjectSerializer.SerializeDiscriminatedValue(BsonSerializationContext context, BsonSerializationArgs args, Object value, Type actualType)
   at MongoDB.Bson.Serialization.Serializers.ObjectSerializer.Serialize(BsonSerializationContext context, BsonSerializationArgs args, Object value)
   at MongoDB.Bson.Serialization.IBsonSerializerExtensions.Serialize(IBsonSerializer serializer, BsonSerializationContext context, Object value)
   at MongoDB.Bson.Serialization.BsonClassMapSerializer`1.SerializeNormalMember(BsonSerializationContext context, Object obj, BsonMemberMap memberMap)
   at MongoDB.Bson.Serialization.BsonClassMapSerializer`1.SerializeMember(BsonSerializationContext context, Object obj, BsonMemberMap memberMap)
   --- End of inner exception stack trace ---
   at MongoDB.Bson.Serialization.BsonClassMapSerializer`1.SerializeMember(BsonSerializationContext context, Object obj, BsonMemberMap memberMap)
   at MongoDB.Bson.Serialization.BsonClassMapSerializer`1.SerializeClass(BsonSerializationContext context, BsonSerializationArgs args, TClass document)
   at MongoDB.Bson.Serialization.BsonClassMapSerializer`1.Serialize(BsonSerializationContext context, BsonSerializationArgs args, TClass value)
   at MongoDB.Bson.Serialization.IBsonSerializerExtensions.Serialize(IBsonSerializer serializer, BsonSerializationContext context, Object value)
   at MongoDB.Bson.Serialization.Serializers.BsonDocumentWrapperSerializer.SerializeValue(BsonSerializationContext context, BsonSerializationArgs args, BsonDocumentWrapper value)
   at MongoDB.Bson.Serialization.Serializers.BsonValueSerializerBase`1.Serialize(BsonSerializationContext context, BsonSerializationArgs args, TBsonValue value)
   at MongoDB.Bson.Serialization.Serializers.BsonValueSerializerBase`1.Serialize(BsonSerializationContext context, BsonSerializationArgs args, TBsonValue value)
   at MongoDB.Driver.Core.Operations.BulkInsertOperation.InsertRequestSerializer.SerializeValue(BsonSerializationContext context, BsonSerializationArgs args, InsertRequest value)
   at MongoDB.Bson.Serialization.Serializers.SealedClassSerializerBase`1.Serialize(BsonSerializationContext context, BsonSerializationArgs args, TValue value)
   at MongoDB.Bson.Serialization.IBsonSerializerExtensions.Serialize(IBsonSerializer serializer, BsonSerializationContext context, Object value)
   at MongoDB.Driver.Core.WireProtocol.Messages.Encoders.BinaryEncoders.Type1SectionFormatter.FormatSection(Type1CommandMessageSection section, IBsonWriter writer)
   at MongoDB.Driver.Core.WireProtocol.Messages.Encoders.BinaryEncoders.CommandMessageBinaryEncoder.WriteSection(BsonBinaryWriter writer, CommandMessageSection section, Int64 messageStartPosition)
   at MongoDB.Driver.Core.WireProtocol.Messages.Encoders.BinaryEncoders.CommandMessageBinaryEncoder.WriteSections(BsonBinaryWriter writer, IEnumerable`1 sections, Int64 messageStartPosition)
   at MongoDB.Driver.Core.WireProtocol.Messages.Encoders.BinaryEncoders.CommandMessageBinaryEncoder.WriteMessage(CommandMessage message)
   at MongoDB.Driver.Core.WireProtocol.Messages.Encoders.BinaryEncoders.CommandRequestMessageBinaryEncoder.WriteMessage(CommandRequestMessage message)
   at MongoDB.Driver.Core.WireProtocol.Messages.Encoders.BinaryEncoders.CommandRequestMessageBinaryEncoder.MongoDB.Driver.Core.WireProtocol.Messages.Encoders.IMessageEncoder.WriteMessage(MongoDBMessage message)
   at MongoDB.Driver.Core.Connections.BinaryConnection.SendMessagesHelper.EncodeMessages(CancellationToken cancellationToken, List`1& sentMessages)
   at MongoDB.Driver.Core.Connections.BinaryConnection.SendMessagesAsync(IEnumerable`1 messages, MessageEncoderSettings messageEncoderSettings, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.PooledConnection.SendMessagesAsync(IEnumerable`1 messages, MessageEncoderSettings messageEncoderSettings, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.WireProtocol.CommandUsingCommandMessageWireProtocol`1.SendMessageAndProcessResponseAsync(CommandRequestMessage message, Int32 responseTo, IConnection connection, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.WireProtocol.CommandUsingCommandMessageWireProtocol`1.ExecuteAsync(IConnection connection, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.Server.ServerChannel.ExecuteProtocolAsync[TResult](IWireProtocol`1 protocol, ICoreSession session, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.RetryableWriteOperationExecutor.ExecuteAsync[TResult](IRetryableWriteOperation`1 operation, RetryableWriteContext context, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.BulkUnmixedWriteOperationBase`1.ExecuteBatchAsync(RetryableWriteContext context, Batch batch, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.BulkUnmixedWriteOperationBase`1.ExecuteBatchesAsync(RetryableWriteContext context, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.BulkMixedWriteOperation.ExecuteBatchAsync(RetryableWriteContext context, Batch batch, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.BulkMixedWriteOperation.ExecuteAsync(IWriteBinding binding, CancellationToken cancellationToken)
   at MongoDB.Driver.OperationExecutor.ExecuteWriteOperationAsync[TResult](IWriteBinding binding, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.ExecuteWriteOperationAsync[TResult](IClientSessionHandle session, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.BulkWriteAsync(IClientSessionHandle session, IEnumerable`1 requests, BulkWriteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.UsingImplicitSessionAsync[TResult](Func`2 funcAsync, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionBase`1.InsertOneAsync(TDocument document, InsertOneOptions options, Func`3 bulkWriteAsync)
   at ContactService.Infras[2025-08-10 16:32:45.717 +03:00 WRN] 01609794-b05b-4de4-bc0e-ca7cea81a2da UnknownService ContactService.Api.Middleware.AuditLoggingMiddleware Failed to log HTTP request audit trail for GET / {"RequestPath":"/","HttpMethod":"GET",[2025-08-10 16:32:45.717 +03:00 WRN] 01609794-b05b-4de4-bc0e-ca7cea81a2da UnknownService ContactService.Api.Middleware.AuditLoggingMiddleware Failed to log HTTP request audit trail for GET / {"RequestPath":"/","HttpMethod":"GET","RequestId":"0HNEO28NONPUA:00000001","ConnectionId":"0HNEO28NONPUA","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
MongoDB.Bson.BsonSerializationException: An error occurred while serializing the NewValues property of class ContactService.Domain.Entities.AuditLog: Type Newtonsoft.Json.Linq.JObject is not configured as a type that is allowed to be serialized for this instance of ObjectSerializer.
 ---> MongoDB.Bson.BsonSerializationException: Type Newtonsoft.Json.Linq.JObject is not configured as a type that is allowed to be serialized for this instance of ObjectSerializer.
   at MongoDB.Bson.Serialization.Serializers.ObjectSerializer.SerializeDiscriminatedValue(BsonSerializationContext context, BsonSerializationArgs args, Object value, Type actualType)
   at MongoDB.Bson.Serialization.Serializers.ObjectSerializer.Serialize(BsonSerializationContext context, BsonSerializationArgs args, Object value)
   at MongoDB.Bson.Serialization.IBsonSerializerExtensions.Serialize(IBsonSerializer serializer, BsonSerializationContext context, Object value)
   at MongoDB.Bson.Serialization.BsonClassMapSerializer`1.SerializeNormalMember(BsonSerializationContext context, Object obj, BsonMemberMap memberMap)
   at MongoDB.Bson.Serialization.BsonClassMapSerializer`1.SerializeMember(BsonSerializationContext context, Object obj, BsonMemberMap memberMap)
   --- End of inner exception stack trace ---
   at MongoDB.Bson.Serialization.BsonClassMapSerializer`1.SerializeMember(BsonSerializationContext context, Object obj, BsonMemberMap memberMap)
   at MongoDB.Bson.Serialization.BsonClassMapSerializer`1.SerializeClass(BsonSerializationContext context, BsonSerializationArgs args, TClass document)
   at MongoDB.Bson.Serialization.BsonClassMapSerializer`1.Serialize(BsonSerializationContext context, BsonSerializationArgs args, TClass value)
   at MongoDB.Bson.Serialization.IBsonSerializerExtensions.Serialize(IBsonSerializer serializer, BsonSerializationContext context, Object value)
   at MongoDB.Bson.Serialization.Serializers.BsonDocumentWrapperSerializer.SerializeValue(BsonSerializationContext context, BsonSerializationArgs args, BsonDocumentWrapper value)
   at MongoDB.Bson.Serialization.Serializers.BsonValueSerializerBase`1.Serialize(BsonSerializationContext context, BsonSerializationArgs args, TBsonValue value)
   at MongoDB.Bson.Serialization.Serializers.BsonValueSerializerBase`1.Serialize(BsonSerializationContext context, BsonSerializationArgs args, TBsonValue value)
   at MongoDB.Driver.Core.Operations.BulkInsertOperation.InsertRequestSerializer.SerializeValue(BsonSerializationContext context, BsonSerializationArgs args, InsertRequest value)
   at MongoDB.Bson.Serialization.Serializers.SealedClassSerializerBase`1.Serialize(BsonSerializationContext context, BsonSerializationArgs args, TValue value)
   at MongoDB.Bson.Serialization.IBsonSerializerExtensions.Serialize(IBsonSerializer serializer, BsonSerializationContext context, Object value)
   at MongoDB.Driver.Core.WireProtocol.Messages.Encoders.BinaryEncoders.Type1SectionFormatter.FormatSection(Type1CommandMessageSection section, IBsonWriter writer)
   at MongoDB.Driver.Core.WireProtocol.Messages.Encoders.BinaryEncoders.CommandMessageBinaryEncoder.WriteSection(BsonBinaryWriter writer, CommandMessageSection section, Int64 messageStartPosition)
   at MongoDB.Driver.Core.WireProtocol.Messages.Encoders.BinaryEncoders.CommandMessageBinaryEncoder.WriteSections(BsonBinaryWriter writer, IEnumerable`1 sections, Int64 messageStartPosition)
   at MongoDB.Driver.Core.WireProtocol.Messages.Encoders.BinaryEncoders.CommandMessageBinaryEncoder.WriteMessage(CommandMessage message)
   at MongoDB.Driver.Core.WireProtocol.Messages.Encoders.BinaryEncoders.CommandRequestMessageBinaryEncoder.WriteMessage(CommandRequestMessage message)
   at MongoDB.Driver.Core.WireProtocol.Messages.Encoders.BinaryEncoders.CommandRequestMessageBinaryEncoder.MongoDB.Driver.Core.WireProtocol.Messages.Encoders.IMessageEncoder.WriteMessage(MongoDBMessage message)
   at MongoDB.Driver.Core.Connections.BinaryConnection.SendMessagesHelper.EncodeMessages(CancellationToken cancellationToken, List`1& sentMessages)
   at MongoDB.Driver.Core.Connections.BinaryConnection.SendMessagesAsync(IEnumerable`1 messages, MessageEncoderSettings messageEncoderSettings, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.PooledConnection.SendMessagesAsync(IEnumerable`1 messages, MessageEncoderSettings messageEncoderSettings, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.WireProtocol.CommandUsingCommandMessageWireProtocol`1.SendMessageAndProcessResponseAsync(CommandRequestMessage message, Int32 responseTo, IConnection connection, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.WireProtocol.CommandUsingCommandMessageWireProtocol`1.ExecuteAsync(IConnection connection, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.Server.ServerChannel.ExecuteProtocolAsync[TResult](IWireProtocol`1 protocol, ICoreSession session, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.RetryableWriteOperationExecutor.ExecuteAsync[TResult](IRetryableWriteOperation`1 operation, RetryableWriteContext context, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.BulkUnmixedWriteOperationBase`1.ExecuteBatchAsync(RetryableWriteContext context, Batch batch, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.BulkUnmixedWriteOperationBase`1.ExecuteBatchesAsync(RetryableWriteContext context, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.BulkMixedWriteOperation.ExecuteBatchAsync(RetryableWriteContext context, Batch batch, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.BulkMixedWriteOperation.ExecuteAsync(IWriteBinding binding, CancellationToken cancellationToken)
   at MongoDB.Driver.OperationExecutor.ExecuteWriteOperationAsync[TResult](IWriteBinding binding, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.ExecuteWriteOperationAsync[TResult](IClientSessionHandle session, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.BulkWriteAsync(IClientSessionHandle session, IEnumerable`1 requests, BulkWriteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.UsingImplicitSessionAsync[TResult](Func`2 funcAsync, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionBase`1.InsertOneAsync(TDocument document, InsertOneOptions options, Func`3 bulkWriteAsync)
   at ContactService.Infrastructure.Repositories.MongoAuditLogRepository.CreateAsync(AuditLog auditLog, CancellationToken cancellationToken) in /Users/r00t/Projects/PhoneBookApp/ContactService.Infrastructure/Repositories/MongoAuditLogRepository.cs:line 29
   at ContactService.Infrastructure.Services.AuditLogService.LogActionAsync(String correlationId, String action, String entityType, String entityId, Object data, String userId, String ipAddress, String userAgent, Dictionary`2 metadata, CancellationToken cancellationToken) in /Users/r00t/Projects/PhoneBookApp/ContactService.Infrastructure/Services/AuditLogService.cs:line 185
   at ContactService.Api.Middleware.AuditLoggingMiddleware.LogHttpRequestAsync(String correlationId, HttpCont[2025-08-10 16:32:45.719 +03:00 INF] 01609794-b05b-4de4-bc0e-ca7cea81a2da ContactService Serilog.AspNetCore.RequestLoggingMiddleware HTTP GET / responded 404 in 61.5218 ms {"RequestHost":"127.0.0.1:5188","RequestScheme":"http","U[2025-08-10 16:32:45.719 +03:00 INF] 01609794-b05b-4de4-bc0e-ca7cea81a2da ContactService Serilog.AspNetCore.RequestLoggingMiddleware HTTP GET / responded 404 in 61.5218 ms {"RequestHost":"127.0.0.1:5188","RequestScheme":"http","UserAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537[2025-08-10 16:32:47.653 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:32:47.709 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:32:47.710 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 16:3[2025-08-10 16:32:48.265 +03:00 INF] f79804d2-f8df-4125-a21a-4b7ceb9d0358 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"RequestPath":"/health","HttpM[2025-08-10 16:32:48.265 +03:00 INF] f79804d2-f8df-4125-a21a-4b7ceb9d0358 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initia[2025-08-10 16:32:48.270 +03:00 INF] f79804d2-f8df-4125-a21a-4b7ceb9d0358 UnknownService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"RequestPath":"/health","HttpMethod":"GET","RequestId":"0H[2025-08-10 16:32:48.270 +03:00 INF] f79804d2-f8df-4125-a21a-4b7ceb9d0358 UnknownService ContactService.Infrastructure.Services.KafkaPr[2025-08-10 16:32:48.367 +03:00 INF] f79804d2-f8df-4125-a21a-4b7ceb9d0358 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"RequestPath":"/health","HttpMethod":"GET","Reque[2025-08-10 16:32:48.367 +03:00 INF] f79804d2-f8df-4125-a21a-4b7ceb9d0358 UnknownService ContactService.Infrastructure.Services.KafkaProducer Ka[2025-08-10 16:32:48.468 +03:00 WRN] f79804d2-f8df-4125-a21a-4b7ceb9d0358 UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check kafka with status "Degraded" completed after 203.1057ms[2025-08-10 16:32:48.468 +03:00 WRN] f79804d2-f8df-4125-a21a-4b7ceb9d0358 UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check kafka with status "Degraded" completed after 203.1057ms with message 'Kafka is available but missing topics: contact-events, report-events, notification-events' {"EventId"[2025-08-10 16:32:48.469 +03:00 ERR] f79804d2-f8df-4125-a21a-4b7ceb9d0358 ContactService Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware An unhandled exception has occurred while executing the request. {"EventId":{"Id[2025-08-10 16:32:48.469 +03:00 ERR] f79804d2-f8df-4125-a21a-4b7ceb9d0358 ContactService Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware An unhandled exception has occurred while executing the request. {"EventId":{"Id":1,"Name":"UnhandledException"},"RequestId":"0HNEO28NONPU9:00000004","RequestPath":"/health","ConnectionId":"0HNEO28NONPU9","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
StackExchange.Redis.RedisConnectionException: It was not possible to connect to the redis server(s). Error connecting right now. To allow this multiplexer to continue retrying until it's able to connect, use abortConnect=false in your connection string or AbortOnConnectFail=false; in your code.
   at StackExchange.Redis.ConnectionMultiplexer.ConnectImpl(ConfigurationOptions configuration, TextWriter writer, Nullable`1 serverType, EndPointCollection endpoints) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 689
   at StackExchange.Redis.ConnectionMultiplexer.Connect(ConfigurationOptions configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 661
   at StackExchange.Redis.ConnectionMultiplexer.Connect(String configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 639
   at ContactService.Container.ServiceCollectionExtensions.<>c__DisplayClass0_0.<AddContactServiceDependencies>b__3(IServiceProvider provider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Container/ServiceCollectionExtensions.cs:line 59
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance[T](IServiceProvider provider)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at ContactService.Api.Middleware.AuditLoggingMiddleware.InvokeAsync(HttpContext context, IAuditLogService auditLogService, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Middleware/AuditLoggingMiddleware.cs:line 48
   at Shared.CrossCutting.Middleware.CorrelationIdMiddleware.InvokeAsync(HttpContext context, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/Shared[2025-08-10 16:32:48.472 +03:00 ERR] f79804d2-f8df-4125-a21a-4b7ceb9d0358 ContactService ContactService.Api.Middleware.GlobalExceptionHandler An unhandled exception occurred {"RequestId":"0HNEO28NONPU9:00000004","RequestPath":"/h[2025-08-10 16:32:48.472 +03:00 ERR] f79804d2-f8df-4125-a21a-4b7ceb9d0358 ContactService ContactService.Api.Middleware.GlobalExceptionHandler An unhandled exception occurred {"RequestId":"0HNEO28NONPU9:00000004","RequestPath":"/health","ConnectionId":"0HNEO28NONPU9","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
StackExchange.Redis.RedisConnectionException: It was not possible to connect to the redis server(s). Error connecting right now. To allow this multiplexer to continue retrying until it's able to connect, use abortConnect=false in your connection string or AbortOnConnectFail=false; in your code.
   at StackExchange.Redis.ConnectionMultiplexer.ConnectImpl(ConfigurationOptions configuration, TextWriter writer, Nullable`1 serverType, EndPointCollection endpoints) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 689
   at StackExchange.Redis.ConnectionMultiplexer.Connect(ConfigurationOptions configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 661
   at StackExchange.Redis.ConnectionMultiplexer.Connect(String configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 639
   at ContactService.Container.ServiceCollectionExtensions.<>c__DisplayClass0_0.<AddContactServiceDependencies>b__3(IServiceProvider provider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Container/ServiceCollectionExtensions.cs:line 59
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance[T](IServiceProvider provider)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at ContactService.Api.Middleware.AuditLoggingMiddleware.InvokeAsync(HttpContext context, IAuditLogService auditLogService, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Middleware/AuditLoggingMiddleware.cs:line 48
   at Shared.CrossCutting.Middleware.CorrelationIdMiddleware.InvokeAsync(HttpContext context, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/Shared[2025-08-10 16:32:48.474 +03:00 ERR] f79804d2-f8df-4125-a21a-4b7ceb9d0358 ContactService Serilog.AspNetCore.RequestLoggingMiddleware HTTP GET /health responded 500 in 214.1202 ms {"RequestHost":"localhost:5188","RequestScheme":"h[2025-08-10 16:32:48.474 +03:00 ERR] f79804d2-f8df-4125-a21a-4b7ceb9d0358 ContactService Serilog.AspNetCore.RequestLoggingMiddleware HTTP GET /health responded 500 in 214.1[2025-08-10 16:32:48.478 +03:00 INF]  ContactService HealthChecks.UI.Core.Notifications.WebHookFailureNotifier Notification is sent on same window time. {"Scope":["HealthReportCollector is collecting health checks results."],"Mac[2025-08-10 16:32:48.478 +03:00 INF]  ContactService HealthChecks.UI.Core.Noti[2025-08-10 16:33:17.713 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:33:17.775 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:33:17.776 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 16:3[2025-08-10 16:33:18.486 +03:00 INF] e5a9a054-a9f1-418e-9f33-e58faca0998b UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"RequestPath":"/health","HttpM[2025-08-10 16:33:18.486 +03:00 INF] e5a9a054-a9f1-418e-9f33-e58faca0998b UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initia[2025-08-10 16:33:18.488 +03:00 INF] e5a9a054-a9f1-418e-9f33-e58faca0998b UnknownService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"RequestPath":"/health","HttpMethod":"GET","RequestId":"0H[2025-08-10 16:33:18.488 +03:00 INF] e5a9a054-a9f1-418e-9f33-e58faca0998b UnknownService ContactService.Infrastructure.Services.KafkaPr[2025-08-10 16:33:18.587 +03:00 INF] e5a9a054-a9f1-418e-9f33-e58faca0998b UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"RequestPath":"/health","HttpMethod":"GET","Reque[2025-08-10 16:33:18.587 +03:00 INF] e5a9a054-a9f1-418e-9f33-e58faca0998b UnknownService ContactService.Infrastructure.Services.KafkaProducer Ka[2025-08-10 16:33:18.689 +03:00 WRN] e5a9a054-a9f1-418e-9f33-e58faca0998b UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check kafka with status "Degraded" completed after 204.0152ms[2025-08-10 16:33:18.689 +03:00 WRN] e5a9a054-a9f1-418e-9f33-e58faca0998b UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check kafka with status "Degraded" completed after 204.0152ms with message 'Kafka is available but missing topics: contact-events, report-events, notification-events' {"EventId"[2025-08-10 16:33:18.689 +03:00 ERR] e5a9a054-a9f1-418e-9f33-e58faca0998b ContactService Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware An unhandled exception has occurred while executing the request. {"EventId":{"Id[2025-08-10 16:33:18.689 +03:00 ERR] e5a9a054-a9f1-418e-9f33-e58faca0998b ContactService Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware An unhandled exception has occurred while executing the request. {"EventId":{"Id":1,"Name":"UnhandledException"},"RequestId":"0HNEO28NONPUB:00000001","RequestPath":"/health","ConnectionId":"0HNEO28NONPUB","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
StackExchange.Redis.RedisConnectionException: It was not possible to connect to the redis server(s). Error connecting right now. To allow this multiplexer to continue retrying until it's able to connect, use abortConnect=false in your connection string or AbortOnConnectFail=false; in your code.
   at StackExchange.Redis.ConnectionMultiplexer.ConnectImpl(ConfigurationOptions configuration, TextWriter writer, Nullable`1 serverType, EndPointCollection endpoints) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 689
   at StackExchange.Redis.ConnectionMultiplexer.Connect(ConfigurationOptions configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 661
   at StackExchange.Redis.ConnectionMultiplexer.Connect(String configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 639
   at ContactService.Container.ServiceCollectionExtensions.<>c__DisplayClass0_0.<AddContactServiceDependencies>b__3(IServiceProvider provider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Container/ServiceCollectionExtensions.cs:line 59
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance[T](IServiceProvider provider)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at ContactService.Api.Middleware.AuditLoggingMiddleware.InvokeAsync(HttpContext context, IAuditLogService auditLogService, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Middleware/AuditLoggingMiddleware.cs:line 48
   at Shared.CrossCutting.Middleware.CorrelationIdMiddleware.InvokeAsync(HttpContext context, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/Shared[2025-08-10 16:33:18.691 +03:00 ERR] e5a9a054-a9f1-418e-9f33-e58faca0998b ContactService ContactService.Api.Middleware.GlobalExceptionHandler An unhandled exception occurred {"RequestId":"0HNEO28NONPUB:00000001","RequestPath":"/h[2025-08-10 16:33:18.691 +03:00 ERR] e5a9a054-a9f1-418e-9f33-e58faca0998b ContactService ContactService.Api.Middleware.GlobalExceptionHandler An unhandled exception occurred {"RequestId":"0HNEO28NONPUB:00000001","RequestPath":"/health","ConnectionId":"0HNEO28NONPUB","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
StackExchange.Redis.RedisConnectionException: It was not possible to connect to the redis server(s). Error connecting right now. To allow this multiplexer to continue retrying until it's able to connect, use abortConnect=false in your connection string or AbortOnConnectFail=false; in your code.
   at StackExchange.Redis.ConnectionMultiplexer.ConnectImpl(ConfigurationOptions configuration, TextWriter writer, Nullable`1 serverType, EndPointCollection endpoints) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 689
   at StackExchange.Redis.ConnectionMultiplexer.Connect(ConfigurationOptions configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 661
   at StackExchange.Redis.ConnectionMultiplexer.Connect(String configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 639
   at ContactService.Container.ServiceCollectionExtensions.<>c__DisplayClass0_0.<AddContactServiceDependencies>b__3(IServiceProvider provider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Container/ServiceCollectionExtensions.cs:line 59
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance[T](IServiceProvider provider)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at ContactService.Api.Middleware.AuditLoggingMiddleware.InvokeAsync(HttpContext context, IAuditLogService auditLogService, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Middleware/AuditLoggingMiddleware.cs:line 48
   at Shared.CrossCutting.Middleware.CorrelationIdMiddleware.InvokeAsync(HttpContext context, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/Shared[2025-08-10 16:33:18.692 +03:00 ERR] e5a9a054-a9f1-418e-9f33-e58faca0998b ContactService Serilog.AspNetCore.RequestLoggingMiddleware HTTP GET /health responded 500 in 208.3708 ms {"RequestHost":"localhost:5188","RequestScheme":"h[2025-08-10 16:33:18.692 +03:00 ERR] e5a9a054-a9f1-418e-9f33-e58faca0998b ContactService Serilog.AspNetCore.RequestLoggingMiddleware HTTP GET /health responded 500 in 208.3[2025-08-10 16:33:21.070 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker is stopping... {"MachineName":"base","EnvironmentName":"Development","Environment":"Devel[2025-08-[2025-08-10 16:33:21.071 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 16:3[2025-08-10 16:33:21.072 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Processed remaining outbox events before shutdown {"MachineName":"base","EnvironmentName":"Development","Environm[2025-08-10 16:33:21[2025-08-10 16:33:21.072 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:33:21.172 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:33:21.173 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:33:21.204 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:33:21.204 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker is stopping {"MachineName":"base","EnvironmentName":"Development","Environment":"Developm[2025-[2025-08-10 16:33:21.204 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker stopped {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"[2025-08-10 16:33:21.204 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker stopped {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:33:42.883 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Connected to MongoDB database: PhoneBookDb {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:33:42.900 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Creating MongoDB indexes for optimal query performance... {"MachineName":"base","EnvironmentName":"Development","Environment":[2025-08-10 16:[2025-08-10 16:33:42.983 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext MongoDB indexes created successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:33:42.983 +03:00 INF]  ContactService  MongoDB indexes initialized successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:33:43.092 +03:00 INF]  ContactService  ContactService başarıyla başlatıldı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:33:43.113 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker started {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"[2[2025-08-10 16:33:43.345 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 16:3[2025-08-10 16:33:43.918 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name[2025-08-10 16:33:43.918 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name 'ContactId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on[2025-08-10 16:33:44.402 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Initializing UI Database {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:33:44.504 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Saving healthchecks configuration to database {"MachineName":"base","EnvironmentName":"Development","Environmen[2025-08-10 16:33:[2025-08-10 16:33:44.931 +03:00 INF] 2e169150-71ff-4eef-b241-3da494e112f7 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"RequestPath":"/health","HttpM[2025-08-10 16:33:44.931 +03:00 INF] 2e169150-71ff-4eef-b241-3da494e112f7 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initia[2025-08-10 16:33:45.097 +03:00 INF] 2e169150-71ff-4eef-b241-3da494e112f7 UnknownService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"RequestPath":"/health","HttpMethod":"GET","RequestId":"0H[2025-08-10 16:33:45.097 +03:00 INF] 2e169150-71ff-4eef-b241-3da494e112f7 UnknownService ContactService.Infrastructure.Services.KafkaPr[2025-08-10 16:33:45.174 +03:00 INF] 2e169150-71ff-4eef-b241-3da494e112f7 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"RequestPath":"/health","HttpMethod":"GET","Reque[2025-08-10 16:33:45.174 +03:00 INF] 2e169150-71ff-4eef-b241-3da494e112f7 UnknownService ContactService.Infrastructure.Services.KafkaProducer Ka[2025-08-10 16:34:06.012 +03:00 WRN] 2e169150-71ff-4eef-b241-3da494e112f7 UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check kafka with status "Degraded" completed after 268.0981ms[2025-08-10 16:34:06.012 +03:00 WRN] 2e169150-71ff-4eef-b241-3da494e112f7 UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check kafka with status "Degraded" completed after 268.0981ms with message 'Kafka is available but missing topics: contact-events, report-events, notification-events' {"EventId"[2025-08-10 16:34:06.056 +03:00 ERR] 2e169150-71ff-4eef-b241-3da494e112f7 ContactService Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware An unhandled exception has occurred while executing the request. {"EventId":{"Id[2025-08-10 16:34:06.056 +03:00 ERR] 2e169150-71ff-4eef-b241-3da494e112f7 ContactService Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware An unhandled exception has occurred while executing the request. {"EventId":{"Id":1,"Name":"UnhandledException"},"RequestId":"0HNEO2A3LJGCN:00000001","RequestPath":"/health","ConnectionId":"0HNEO2A3LJGCN","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
StackExchange.Redis.RedisConnectionException: It was not possible to connect to the redis server(s). Error connecting right now. To allow this multiplexer to continue retrying until it's able to connect, use abortConnect=false in your connection string or AbortOnConnectFail=false; in your code.
   at StackExchange.Redis.ConnectionMultiplexer.ConnectImpl(ConfigurationOptions configuration, TextWriter writer, Nullable`1 serverType, EndPointCollection endpoints) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 689
   at StackExchange.Redis.ConnectionMultiplexer.Connect(ConfigurationOptions configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 661
   at StackExchange.Redis.ConnectionMultiplexer.Connect(String configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 639
   at ContactService.Container.ServiceCollectionExtensions.<>c__DisplayClass0_0.<AddContactServiceDependencies>b__3(IServiceProvider provider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Container/ServiceCollectionExtensions.cs:line 59
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance[T](IServiceProvider provider)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at ContactService.Api.Middleware.AuditLoggingMiddleware.InvokeAsync(HttpContext context, IAuditLogService auditLogService, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Middleware/AuditLoggingMiddleware.cs:line 48
   at Shared.CrossCutting.Middleware.CorrelationIdMiddleware.InvokeAsync(HttpContext context, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/Shared[2025-08-10 16:34:07.479 +03:00 ERR] 2e169150-71ff-4eef-b241-3da494e112f7 ContactService ContactService.Api.Middleware.GlobalExceptionHandler An unhandled exception occurred {"RequestId":"0HNEO2A3LJGCN:00000001","RequestPath":"/h[2025-08-10 16:34:07.479 +03:00 ERR] 2e169150-71ff-4eef-b241-3da494e112f7 ContactService ContactService.Api.Middleware.GlobalExceptionHandler An unhandled exception occurred {"RequestId":"0HNEO2A3LJGCN:00000001","RequestPath":"/health","ConnectionId":"0HNEO2A3LJGCN","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
StackExchange.Redis.RedisConnectionException: It was not possible to connect to the redis server(s). Error connecting right now. To allow this multiplexer to continue retrying until it's able to connect, use abortConnect=false in your connection string or AbortOnConnectFail=false; in your code.
   at StackExchange.Redis.ConnectionMultiplexer.ConnectImpl(ConfigurationOptions configuration, TextWriter writer, Nullable`1 serverType, EndPointCollection endpoints) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 689
   at StackExchange.Redis.ConnectionMultiplexer.Connect(ConfigurationOptions configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 661
   at StackExchange.Redis.ConnectionMultiplexer.Connect(String configuration, TextWriter log) in /_/src/StackExchange.Redis/ConnectionMultiplexer.cs:line 639
   at ContactService.Container.ServiceCollectionExtensions.<>c__DisplayClass0_0.<AddContactServiceDependencies>b__3(IServiceProvider provider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Container/ServiceCollectionExtensions.cs:line 59
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance[T](IServiceProvider provider)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.RunCheckAsync(HealthCheckRegistration registration, CancellationToken cancellationToken)
   at Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService.CheckHealthAsync(Func`2 predicate, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.HealthChecks.HealthCheckMiddleware.InvokeAsync(HttpContext httpContext)
   at ContactService.Api.Middleware.AuditLoggingMiddleware.InvokeAsync(HttpContext context, IAuditLogService auditLogService, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/ContactService.Api/Middleware/AuditLoggingMiddleware.cs:line 48
   at Shared.CrossCutting.Middleware.CorrelationIdMiddleware.InvokeAsync(HttpContext context, ICorrelationIdProvider correlationIdProvider) in /Users/r00t/Projects/PhoneBookApp/Shared[2025-08-10 16:34:07.519 +03:00 ERR] 2e169150-71ff-4eef-b241-3da494e112f7 ContactService Serilog.AspNetCore.RequestLoggingMiddleware HTTP GET /health responded 500 in 22615.8918 ms {"RequestHost":"localhost:7138","RequestScheme":[2025-08-10 16:34:07.519 +03:00 ERR] 2e169150-71ff-4eef-b241-3da494e112f7 ContactService Serilog.AspNetCore.RequestLoggingMiddleware HTTP GET /health responded 500 in 22615.89[2025-08-10 16:34:14.525 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:34:14.545 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:34:14.551 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 16:3[2025-08-10 16:34:37.746 +03:00 INF] b9e8430f-10e6-40f4-8ea5-93b01e42ee79 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"RequestPath":"/health","HttpM[2025-08-10 16:34:37.746 +03:00 INF] b9e8430f-10e6-40f4-8ea5-93b01e42ee79 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initia[2025-08-10 16:34:38.006 +03:00 INF] b9e8430f-10e6-40f4-8ea5-93b01e42ee79 UnknownService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"RequestPath":"/health","HttpMethod":"GET","RequestId":"0H[2025-08-10 16:34:38.006 +03:00 INF] b9e8430f-10e6-40f4-8ea5-93b01e42ee79 UnknownService ContactService.Infrastructure.Services.KafkaPr[2025-08-10 16:34:38.126 +03:00 INF] b9e8430f-10e6-40f4-8ea5-93b01e42ee79 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"RequestPath":"/health","HttpMethod":"GET","Reque[2025-08-10 16:34:38.126 +03:00 INF] b9e8430f-10e6-40f4-8ea5-93b01e42ee79 UnknownService ContactService.Infrastructure.Services.KafkaProducer Ka[2025-08-10 16:34:38.126 +03:00 WRN] b9e8430f-10e6-40f4-8ea5-93b01e42ee79 UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check kafka with status "Degraded" completed after 342.0853ms[2025-08-10 16:34:38.126 +03:00 WRN] b9e8430f-10e6-40f4-8ea5-93b01e42ee79 UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check kafka with status "Degraded" completed after 342.0853ms with message 'Kafka is available but missing topics: contact-events, report-events, notification-events' {"EventId":{"Id":103,"Name":"HealthCheckEnd"},"RequestPath":"/health","HttpMethod":"GET","RequestId":"0HNEO2A3LJGCN:00000002","ConnectionId":"0HNEO2A3LJGCN","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:38:28.523 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Connected to MongoDB database: PhoneBookDb {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:38:28.537 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Creating MongoDB indexes for optimal query performance... {"MachineName":"base","EnvironmentName":"Development","Environment":[2025-08-10 16:[2025-08-10 16:38:28.585 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext MongoDB indexes created successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:38:28.586 +03:00 INF]  ContactService  MongoDB indexes initialized successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:38:28.621 +03:00 INF]  ContactService  ContactService başarıyla başlatıldı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:38:28.626 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker started {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"[2[2025-08-10 16:38:28.710 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 16:3[2025-08-10 16:38:28.871 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name[2025-08-10 16:38:28.871 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name 'ContactId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on[2025-08-10 16:38:29.017 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Initializing UI Database {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:38:29.054 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Saving healthchecks configuration to database {"MachineName":"base","EnvironmentName":"Development","Environmen[2025-08-10 16:38:[2025-08-10 16:38:29.135 +03:00 WRN] a01f8932-78e4-425a-bd9c-5a482d8013e6 UnknownService Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"Fail[2025-08-10 16:38:29.135 +03:00 WRN] a01f8932-78e4-425a-bd9c-5a482d8013e6 UnknownService Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware Failed to determine the https port for redirect. {"EventId":{"Id[2025-08-10 16:38:29.137 +03:00 INF] a01f8932-78e4-425a-bd9c-5a482d8013e6 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"RequestPath":"/health","HttpM[2025-08-10 16:38:29.137 +03:00 INF] a01f8932-78e4-425a-bd9c-5a482d8013e6 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initia[2025-08-10 16:38:29.158 +03:00 INF] a01f8932-78e4-425a-bd9c-5a482d8013e6 UnknownService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"RequestPath":"/health","HttpMethod":"GET","RequestId":"0H[2025-08-10 16:38:29.158 +03:00 INF] a01f8932-78e4-425a-bd9c-5a482d8013e6 UnknownService ContactService.Infrastructure.Services.KafkaPr[2025-08-10 16:38:29.239 +03:00 INF] a01f8932-78e4-425a-bd9c-5a482d8013e6 UnknownService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"RequestPath":"/health","HttpMethod":"GET","Reque[2025-08-10 16:38:29.239 +03:00 INF] a01f8932-78e4-425a-bd9c-5a482d8013e6 UnknownService ContactService.Infrastructure.Services.KafkaProducer Ka[2025-08-10 16:38:29.342 +03:00 WRN] a01f8932-78e4-425a-bd9c-5a482d8013e6 UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check kafka with status "Degraded" completed after 204.368ms [2025-08-10 16:38:29.342 +03:00 WRN] a01f8932-78e4-425a-bd9c-5a482d8013e6 UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check kafka with status "Degraded" completed after 204.368ms with message 'Kafka is available but missing topics: contact-events, report-events, notification-events' {"EventId"[2025-08-10 16:38:35.167 +03:00 ERR] a01f8932-78e4-425a-bd9c-5a482d8013e6 UnknownService ContactService.Infrastructure.HealthChecks.RedisHealthCheck Redis connection failed {"HealthCheckName":"redis","RequestPath":"/health","Http[2025-08-10 16:38:35.167 +03:00 ERR] a01f8932-78e4-425a-bd9c-5a482d8013e6 UnknownService ContactService.Infrastructure.HealthChecks.RedisHealthCheck Redis connection failed {"HealthCheckName":"redis","RequestPath":"/health","HttpMethod":"GET","RequestId":"0HNEO2COCOF55:00000001","ConnectionId":"0HNEO2COCOF55","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
StackExchange.Redis.RedisConnectionException: The message timed out in the backlog attempting to send because no connection became available (5000ms) - Last Connection Exception: UnableToConnect on localhost:6379/Interactive, Initializing/NotStarted, last: NONE, origin: BeginConnectAsync, outstanding: 0, last-read: 0s ago, last-write: 0s ago, keep-alive: 60s, state: Connecting, mgr: 10 of 10 available, last-heartbeat: never, global: 0s ago, v: 2.8.58.19568, command=SETEX, timeout: 5000, inst: 0, qu: 0, qs: 0, aw: False, bw: CheckingForTimeout, last-in: 0, cur-in: 0, sync-ops: 0, async-ops: 1, serverEndpoint: localhost:6379, conn-sec: n/a, aoc: 0, mc: 1/1/0, mgr: 10 of 10 available, clientName: base(SE.Redis-v2.8.58.19568), IOCP: (Busy=0,Free=1000,Min=1,Max=1000), WORKER: (Busy=1,Free=32766,Min=16,Max=32767), POOL: (Threads=13,QueuedItems=0,CompletedItems=233,Timers=15), v: 2.8.58.19568 (Please take a look at this article for some common client-side issues that can cause timeouts: https://stackexchange.github.io/StackExchange.Redis/Timeouts)
 ---> StackExchange.Redis.RedisConnectionException: UnableToConnect on localhost:6379/Interactive, Initializing/NotStarted, last: NONE, origin: BeginConnectAsync, outstanding: 0, last-read: 0s ago, last-write: 0s ago, keep-alive: 60s, state: Connecting, mgr: 10 of 10 available, last-heartbeat: never, global: 0s ago, v: 2.8.58.19568
   --- End of inner exception stack trace ---
   at ContactService.Infras[2025-08-10 16:38:35.173 +03:00 ERR] a01f8932-78e4-425a-bd9c-5a482d8013e6 UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check redis with status "Unhealthy" completed after 6013.7957[2025-08-10 16:38:35.173 +03:00 ERR] a01f8932-78e4-425a-bd9c-5a482d8013e6 UnknownService Microsoft.Extensions.Diagnostics.HealthChecks.DefaultHealthCheckService Health check redis with status "Unhealthy" completed after 6013.7957ms with message 'Redis connection failed' {"EventId":{"Id":103,"Name":"HealthCheckEnd"},"RequestPath":"/health","HttpMethod":"GET","RequestId":"0HNEO2COCOF55:00000001","ConnectionId":"0HNEO2COCOF55","MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
StackExchange.Redis.RedisConnectionException: The message timed out in the backlog attempting to send because no connection became available (5000ms) - Last Connection Exception: UnableToConnect on localhost:6379/Interactive, Initializing/NotStarted, last: NONE, origin: BeginConnectAsync, outstanding: 0, last-read: 0s ago, last-write: 0s ago, keep-alive: 60s, state: Connecting, mgr: 10 of 10 available, last-heartbeat: never, global: 0s ago, v: 2.8.58.19568, command=SETEX, timeout: 5000, inst: 0, qu: 0, qs: 0, aw: False, bw: CheckingForTimeout, last-in: 0, cur-in: 0, sync-ops: 0, async-ops: 1, serverEndpoint: localhost:6379, conn-sec: n/a, aoc: 0, mc: 1/1/0, mgr: 10 of 10 available, clientName: base(SE.Redis-v2.8.58.19568), IOCP: (Busy=0,Free=1000,Min=1,Max=1000), WORKER: (Busy=1,Free=32766,Min=16,Max=32767), POOL: (Threads=13,QueuedItems=0,CompletedItems=233,Timers=15), v: 2.8.58.19568 (Please take a look at this article for some common client-side issues that can cause timeouts: https://stackexchange.github.io/StackExchange.Redis/Timeouts)
 ---> StackExchange.Redis.RedisConnectionException: UnableToConnect on localhost:6379/Interactive, Initializing/NotStarted, last: NONE, origin: BeginConnectAsync, outstanding: 0, last-read: 0s ago, last-write: 0s ago, keep-alive: 60s, state: Connecting, mgr: 10 of 10 available, last-heartbeat: never, global: 0s ago, v: 2.8.58.19568
   --- End of inner exception stack trace ---
   at ContactService.Infras[2025-08-10 16:38:35.207 +03:00 ERR] a01f8932-78e4-425a-bd9c-5a482d8013e6 ContactService Serilog.AspNetCore.RequestLoggingMiddleware HTTP GET /health responded 503 in 6071.3392 ms {"RequestHost":"localhost:5188","RequestScheme":"[2025-08-10 16:38:35.207 +03:00 ERR] a01f8932-78e4-425a-bd9c-5a482d8013e6 ContactService Serilog.AspNetCore.RequestLoggingMiddleware HTTP GET /health responded 503 in 6071.3[2025-08-10 16:38:51.392 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker is stopping... {"MachineName":"base","EnvironmentName":"Development","Environment":"Devel[2025-08-[2025-08-10 16:38:51.396 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 16:3[2025-08-10 16:38:51.418 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Processed remaining outbox events before shutdown {"MachineName":"base","EnvironmentName":"Development","Environm[2025-08-10 16:38:51[2025-08-10 16:38:51.418 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:38:51.497 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:38:51.499 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:38:51.522 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 16:38:51.523 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker is stopping {"MachineName":"base","EnvironmentName":"Development","Environment":"Developm[2025-[2025-08-10 16:38:51.523 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker stopped {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"[2025-08-10 16:38:51.523 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker stopped {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 22:21:59.096 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Connected to MongoDB database: PhoneBookDb {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 22:21:59.113 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext Creating MongoDB indexes for optimal query performance... {"MachineName":"base","EnvironmentName":"Development","Environment":[2025-08-10 22:[2025-08-10 22:21:59.179 +03:00 INF]  ContactService ContactService.Infrastructure.Data.MongoDbContext MongoDB indexes created successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 22:21:59.179 +03:00 INF]  ContactService  MongoDB indexes initialized successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 22:21:59.223 +03:00 INF]  ContactService  ContactService başarıyla başlatıldı {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 22:21:59.234 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker started {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"[2[2025-08-10 22:21:59.627 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 22:2[2025-08-10 22:22:00.120 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name[2025-08-10 22:22:00.120 +03:00 WRN]  ContactService Microsoft.EntityFrameworkCore.Model.Validation The foreign key property 'ContactInfo.ContactId1' was created in shadow state because a conflicting property with the simple name 'ContactId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on[2025-08-10 22:22:00.554 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Initializing UI Database {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 22:22:00.655 +03:00 INF]  ContactService HealthChecks.UI.Core.HostedService.UIInitializationHostedService Saving healthchecks configuration to database {"MachineName":"base","EnvironmentName":"Development","Environmen[2025-08-10 22:22:[2025-08-10 22:22:04.460 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker is stopping... {"MachineName":"base","EnvironmentName":"Development","Environment":"Devel[2025-08-[2025-08-10 22:22:04.461 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer initialized with servers: localhost:9092 {"MachineName":"base","EnvironmentName":"Development","Environment"[2025-08-10 22:2[2025-08-10 22:22:04.468 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Processed remaining outbox events before shutdown {"MachineName":"base","EnvironmentName":"Development","Environm[2025-08-10 22:22:04[2025-08-10 22:22:04.468 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 22:22:04.563 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 22:22:04.565 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Disposing Kafka producer... {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 22:22:04.569 +03:00 INF]  ContactService ContactService.Infrastructure.Services.KafkaProducer Kafka producer disposed successfully {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
[2025-08-10 22:22:04.569 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker is stopping {"MachineName":"base","EnvironmentName":"Development","Environment":"Developm[2025-[2025-08-10 22:22:04.569 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker stopped {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"[2025-08-10 22:22:04.569 +03:00 INF]  ContactService ContactService.ApplicationService.Worker.OutboxProcessorWorker Outbox Processor Worker stopped {"MachineName":"base","EnvironmentName":"Development","Environment":"Development"}
